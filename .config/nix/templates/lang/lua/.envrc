# ~/.config/nix/templates/lang/lua/.envrc
# # .envrc - Automatically load Nix development shell
# ---------------------------------------
# Copyright (C) 2025 Qompass AI, All rights reserved
use flake
# Optional: Load specific shell if not using default
# use flake .#full
# use flake .#ai
# use flake .#minimal

export LUA_PATH="./lua/?.lua;./lua/?/init.lua;;"
export LUA_CPATH="./lib/?.so;./lib/?/init.so;;"
export LUAJIT_ENABLE_LUA52COMPAT=1
export LUAJIT_ENABLE_MIXED_FRAME_TRAVERSAL=1
export OMP_NUM_THREADS=$(nproc)
export TORCH_USE_CUDA_DSA=1
export TF_CPP_MIN_LOG_LEVEL=2
export CARGO_TARGET_DIR="./target"
export RUST_BACKTRACE=1
export PROJECT_ROOT=$(pwd)
export LUA_AI_CACHE="$PROJECT_ROOT/.cache"
mkdir -p lua lib src python docs benchmarks examples
mkdir -p .cache logs
echo "ðŸŒ™ Lua AI development environment loaded!"
echo "Primary runtime: OpenResty LuaJIT 2.1 (Lua 5.1 compatible)"
